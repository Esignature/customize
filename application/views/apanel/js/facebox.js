(function(d){d.facebox=function(m,l){d.facebox.loading();if(m.ajax){g(m.ajax)}else{if(m.image){j(m.image)}else{if(m.div){e(m.div)}else{if(d.isFunction(m)){m.call(d)}else{d.facebox.reveal(m,l)}}}}};d.extend(d.facebox,{settings:{opacity:0,overlay:true,loadingImage:"http://localhost/visitor_target/application/views/apanel/img/loading.gif",closeImage:"http://localhost/visitor_target/application/views/apanel/img/closelabel.gif",imageTypes:["png","jpg","jpeg","gif"],faceboxHtml:'    <div id="facebox" style="display:none;">       <div class="popup">         <table>           <tbody>             <tr>               <td class="tl"/><td class="b"/><td class="tr"/>             </tr>             <tr>               <td class="b"/>               <td class="body">                 <div class="content">                 </div>                 <div class="footer">                   <a href="#" class="close">                     <img src="http://localhost/visitor_target/application/views/apanel/img/closelabel.gif" title="close" class="close_image" />                   </a>                 </div>               </td>               <td class="b"/>             </tr>             <tr>               <td class="bl"/><td class="b"/><td class="br"/>             </tr>           </tbody>         </table>       </div>     </div>'},loading:function(){c();if(d("#facebox .loading").length==1){return true}h();d("#facebox .content").empty();d("#facebox .body").children().hide().end().append('<div class="loading"><img src="'+d.facebox.settings.loadingImage+'"/></div>');d("#facebox").css({top:a()[1]+(k()/10),left:385.5}).show();d(document).bind("keydown.facebox",function(l){if(l.keyCode==27){d.facebox.close()}return true});d(document).trigger("loading.facebox")},reveal:function(m,l){d(document).trigger("beforeReveal.facebox");if(l){d("#facebox .content").addClass(l)}d("#facebox .content").append(m);d("#facebox .loading").remove();d("#facebox .body").children().fadeIn("normal");d("#facebox").css("left",d(window).width()/2-(d("#facebox table").width()/2));d(document).trigger("reveal.facebox").trigger("afterReveal.facebox")},close:function(){d(document).trigger("close.facebox");return false}});d.fn.facebox=function(l){c(l);function m(){d.facebox.loading(true);var n=this.rel.match(/facebox\[?\.(\w+)\]?/);if(n){n=n[1]}e(this.href,n);return false}return this.click(m)};function c(m){if(d.facebox.settings.inited){return true}else{d.facebox.settings.inited=true}d(document).trigger("init.facebox");b();var n=d.facebox.settings.imageTypes.join("|");d.facebox.settings.imageTypesRegexp=new RegExp("."+n+"$","i");if(m){d.extend(d.facebox.settings,m)}d("body").append(d.facebox.settings.faceboxHtml);var l=[new Image(),new Image()];l[0].src=d.facebox.settings.closeImage;l[1].src=d.facebox.settings.loadingImage;d("#facebox").find(".b:first, .bl, .br, .tl, .tr").each(function(){l.push(new Image());l.slice(-1).src=d(this).css("background-image").replace(/url\((.+)\)/,"$1")});d("#facebox .close").click(d.facebox.close);d("#facebox .close_image").attr("src",d.facebox.settings.closeImage)}function a(){var l,m;if(self.pageYOffset){m=self.pageYOffset;l=self.pageXOffset}else{if(document.documentElement&&document.documentElement.scrollTop){m=document.documentElement.scrollTop;l=document.documentElement.scrollLeft}else{if(document.body){m=document.body.scrollTop;l=document.body.scrollLeft}}}return new Array(l,m)}function k(){var l;if(self.innerHeight){l=self.innerHeight}else{if(document.documentElement&&document.documentElement.clientHeight){l=document.documentElement.clientHeight}else{if(document.body){l=document.body.clientHeight}}}return l}function b(){var l=d.facebox.settings;l.loadingImage=l.loading_image||l.loadingImage;l.closeImage=l.close_image||l.closeImage;l.imageTypes=l.image_types||l.imageTypes;l.faceboxHtml=l.facebox_html||l.faceboxHtml}function e(n,m){if(n.match(/#/)){var l=window.location.href.split("#")[0];var o=n.replace(l,"");d.facebox.reveal(d(o).clone().show(),m)}else{if(n.match(d.facebox.settings.imageTypesRegexp)){j(n,m)}else{g(n,m)}}}function j(m,l){var n=new Image();n.onload=function(){d.facebox.reveal('<div class="image"><img src="'+n.src+'" /></div>',l)};n.src=m}function g(m,l){d.get(m,function(n){d.facebox.reveal(n,l)})}function i(){return d.facebox.settings.overlay==false||d.facebox.settings.opacity===null}function h(){if(i()){return}if(d("facebox_overlay").length==0){d("body").append('<div id="facebox_overlay" class="facebox_hide"></div>')}d("#facebox_overlay").hide().addClass("facebox_overlayBG").css("opacity",d.facebox.settings.opacity).click(function(){d(document).trigger("close.facebox")}).fadeIn(200);return false}function f(){if(i()){return}d("#facebox_overlay").fadeOut(200,function(){d("#facebox_overlay").removeClass("facebox_overlayBG");d("#facebox_overlay").addClass("facebox_hide");d("#facebox_overlay").remove()});return false}d(document).bind("close.facebox",function(){d(document).unbind("keydown.facebox");d("#facebox").fadeOut(function(){d("#facebox .content").removeClass().addClass("content");f();d("#facebox .loading").remove()})})})(jQuery);